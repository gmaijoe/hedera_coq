<!DOCTYPE html>
<html lang="en">
<head>
	<div id="main-head">
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>{{ title }}</title>
		<link rel='stylesheet' href='/stylesheets/style.css' />

		<!-- JQuery Bower -->
		<script type="text/javascript" src='/bower_components/jquery/dist/jquery.min.js'></script>

		<!-- Tether Bower (required for bootstrap 4.0.0) -->
		<link rel="stylesheet" href="/bower_components/tether/dist/css/tether.min.css">
		<script type="text/javascript" src="bower_components/tether/dist/js/tether.min.js"></script>

		<!-- Bootstrap Bower 4.0.0 -->
		<link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
		<script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	</div>
</head>

<body>
    <center><b>Share!</b></center><br>
    <div id="result_pic">
    </div><br>
    <div id="share-buttons">

        <!-- Facebook -->
        <a id="facebook" href="http://www.facebook.com/sharer.php?u=" target="_blank">
            <img src="https://simplesharebuttons.com/images/somacro/facebook.png" alt="Facebook" />
        </a>

        <!-- Twitter -->
        <a id="twitter" href="https://twitter.com/share?url=" target="_blank">
            <img src="https://simplesharebuttons.com/images/somacro/twitter.png" alt="Twitter" />
        </a>

        <!-- Google+ -->
        <a id="google" href="https://plus.google.com/share?url=" target="_blank">
            <img src="https://simplesharebuttons.com/images/somacro/google.png" alt="Google" />
        </a>

        <!-- Tumblr-->
        <a id="tumblr" href="http://www.tumblr.com/share/link?url=" target="_blank">
            <img src="https://simplesharebuttons.com/images/somacro/tumblr.png" alt="Tumblr" />
        </a>

        <!-- Email -->
        <a id="email" href="mailto:?Subject=Check out this cool picture by Mario Testino!">
            <img src="https://simplesharebuttons.com/images/somacro/email.png" alt="Email" />
        </a>

    </div>
</body>

<script>
    $(function(){
        var url = getQueryStringValue("url");

        $("#result_pic").append("<img id=\"pic\" src=\"" + url + "\">")

        populate_custom_URL();

        $('#share-buttons a').click(function(e){
            // alert(this.href)
        });
    })

    function getQueryStringValue (key) {  
      return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
  }  

    function populate_custom_URL() {
        var all_elements = $('#share-buttons a');
        var pageURL = $('#pic').attr('src'); // make sure link to picture is correct

        for (var i = 0, max = all_elements.length; i < max; i++) {
            currentID = all_elements[i].id;
            currentHREF = all_elements[i].href;

            if (currentID == 'facebook') {
                all_elements[i].href = currentHREF + pageURL;
            } else if (currentID == 'twitter') {  
                all_elements[i].href = currentHREF + pageURL + '&amp;text=Sweet%20picture%20by%20Mario%20Testino!%20Enjoy!&amp;hashtags=mariotestino';
            } else if (currentID == 'google') {
                all_elements[i].href = currentHREF + pageURL;
            } else if (currentID == 'tumblr') {
                all_elements[i].href = currentHREF + pageURL + '&amp;title=Check out this cool picture by Mario Testino!';
            } else if (currentID == 'email') {
                all_elements[i].href = currentHREF + '&amp;Body=Sweet%20picture%20by%20Mario%20Testino!%20Enjoy!%20' + pageURL;
            } else {
                    // element not found
            }
            console.log(all_elements[i].href);
        }
    };
</script>

</html>